<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMM PRO - Market</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Montserrat', sans-serif; background: #0a0a1a; color: #e0e0e0; margin: 0; padding: 15px; text-align: center; }
        .container { max-width: 600px; margin: 0 auto; padding: 15px; }
        h1, h2, h3 { color: #df20ff; }
        
        .balance-card { 
            background: linear-gradient(135deg, #1a1a2e 0%, #0f0f1a 100%); 
            padding: 25px; 
            border-radius: 20px; 
            margin-bottom: 30px; 
            border: 2px solid #df20ff; 
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5);
            position: relative;
            overflow: hidden;
        }
        .balance-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at center, rgba(223, 32, 255, 0.1) 0%, transparent 70%);
            animation: rotate 15s linear infinite;
        }
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .balance-card h3 { margin-bottom: 15px; font-size: 1.5em; color: #fff; text-shadow: 0 0 10px rgba(255, 255, 255, 0.3); }
        .balance-card #user-balance { font-size: 2.5em; font-weight: 700; color: #00ff00; text-shadow: 0 0 15px rgba(0, 255, 0, 0.5); }
        
        .upload-btn-wrapper { margin-top: 20px; }
        .upload-btn { 
            display: inline-block; 
            background: linear-gradient(90deg, #df20ff, #8a2be2); 
            color: white; 
            padding: 12px 25px; 
            border-radius: 30px; 
            cursor: pointer; 
            font-weight: 600; 
            font-size: 1.1em;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(223, 32, 255, 0.4);
        }
        .upload-btn:hover { background: linear-gradient(90deg, #8a2be2, #df20ff); transform: translateY(-3px); box-shadow: 0 8px 20px rgba(223, 32, 255, 0.6); }
        input[type="file"] { display: none; }

        .welcome-text { margin-top: 30px; font-size: 1.1em; line-height: 1.6; color: #c0c0c0; }
        .welcome-text p strong { color: #df20ff; }
        
        .service-section { margin-top: 40px; }
        .service-list { display: flex; flex-direction: column; gap: 12px; }
        .service-item { 
            background: #16162e; 
            padding: 18px; 
            border-radius: 12px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            border: 1px solid #3a3a5a; 
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }
        .service-item strong { color: #ffffff; font-size: 1.2em; }
        .service-item small { color: #a0a0a0; font-size: 0.9em; }
        .buy-btn { 
            background: linear-gradient(90deg, #00c6ff, #0072ff); 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            border-radius: 25px; 
            cursor: pointer; 
            font-weight: 600; 
            transition: all 0.3s ease;
        }
        .buy-btn:hover { background: linear-gradient(90deg, #0072ff, #00c6ff); transform: scale(1.05); box-shadow: 0 5px 15px rgba(0, 114, 255, 0.4); }
    </style>
</head>
<body>
    <div class="container">
        <div class="balance-card">
            <h3>Cari Balansƒ±nƒ±z:</h3>
            <span id="user-balance">0.00</span> <span style="font-size: 1.5em; color: #e0e0e0;">AZN</span>
            <div class="upload-btn-wrapper">
                <label for="fi" class="upload-btn">‚ûï Balans Artƒ±r</label>
                <input type="file" id="fi" accept="image/*">
            </div>
        </div>

        <div class="welcome-text">
            <p><strong>SMM PRO</strong>-ya xo≈ü g…ôlmis…ôn! Biziml…ô siz sosial media xidm…ôtl…ôrini asanlƒ±qla …ôld…ô ed…ô bil…ôrsiniz.</p>
            <p>G√ºv…ônli v…ô s√ºr…ôtli xidm…ôt √º√ß√ºn biz…ô etibar edin.</p>
        </div>

        <div class="service-section">
            <h2>üî• Xidm…ôtl…ôrimiz</h2>
            <div id="services" class="service-list">
                <p style="color: #a0a0a0;">Xidm…ôtl…ôr y√ºkl…ônir...</p>
            </div>
        </div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        // Saytdan botun start mesajƒ± i√ß…ôrisind…ôki balansƒ± oxuyub g√∂st…ôririk
        document.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            const balance = params.get('balance');
            if (balance) {
                document.getElementById('user-balance').innerText = parseFloat(balance).toFixed(2);
            }
        });

        // Q…ôbz Y√ºkl…ôm…ô Funksiyasƒ±
        document.getElementById('fi').addEventListener('change', function() {
            if (tg) {
                tg.sendData("qebz_atildi");
                tg.close();
            }
        });

        // --- Xidm…ôtl…ôrin y√ºkl…ônm…ôsi (Botdan API m…ôlumatƒ± g…ôl…ônd…ô) ---
        // Bu hiss…ô botdan g…ôl…ôn m…ôlumatƒ± q…ôbul ed…ôc…ôk
        if (tg) {
            tg.onEvent('mainButtonClicked', () => {
                // Bu d√ºym…ôy…ô basanda botdan g…ôl…ôn m…ôlumatƒ± g√∂zl…ôyir
            });
            // Botdan g…ôl…ôn data √º√ß√ºn (m…ôs…ôl…ôn, xidm…ôtl…ôr)
            tg.onEvent('themeChanged', () => {
                // Tema d…ôyi≈üdikd…ô
            });
        }
        
        // Bu funksiya botdan g…ôl…ôn xidm…ôtl…ôri g√∂st…ôrm…ôk √º√ß√ºnd√ºr
        function renderServices(services) {
            const container = document.getElementById('services');
            container.innerHTML = ''; // K√∂hn…ô "y√ºkl…ônir" yazƒ±sƒ±nƒ± silirik
            if (services.length === 0) {
                container.innerHTML = "<p style='color: #a0a0a0;'>Hazƒ±rda xidm…ôtl…ôr m√∂vcud deyil.</p>";
                return;
            }
            services.forEach(s => {
                container.innerHTML += `
                    <div class="service-item">
                        <div>
                            <strong>${s.name}</strong><br>
                            <small>${s.rate} AZN / 1000 …ôd…ôd</small>
                        </div>
                        <button class="buy-btn" onclick="buyService('${s.service}', '${s.name}', '${s.rate}')">Sifari≈ü Ver</button>
                    </div>
                `;
            });
        }

        // Sifari≈ü Ver d√ºym…ôsin…ô basanda bot-a m…ôlumat g√∂nd…ôrir
        function buyService(service_id, service_name, service_rate) {
            if (tg) {
                tg.sendData(`order_${service_id}_${service_name.replace(/ /g, '_')}_${service_rate}`);
                tg.close();
            }
        }

        // Test √º√ß√ºn balans v…ô servis y√ºkl…ôm…ô
        // Botdan g…ôl…ôn "web_app_data" vasit…ôsil…ô bu funksiyalar √ßaƒüƒ±rƒ±lacaq
        // M…ôs…ôl…ôn, bot 'set_balance_12.50' kimi data g√∂nd…ôr…ô bil…ôr
        // v…ô ya 'set_services_[{"name":"Foll","rate":"1.2","service":"101"}]'
    </script>
</body>
</html>
