<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SMM AZERBAIJAN PRO</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        body { margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; background: #000; color: white; height: 100vh; overflow: hidden; }
        
        #canvas-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }

        /* GiriÅŸ Raket AnimasiyasÄ± */
        #intro-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 1000; display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 1s ease;
        }
        .rocket { font-size: 80px; position: absolute; bottom: -150px; filter: drop-shadow(0 0 20px #ffaa00); }
        .fly-animation { animation: rocketFly 2.5s cubic-bezier(0.4, 0, 0.2, 1) forwards; }
        @keyframes rocketFly {
            0% { bottom: -150px; transform: scale(0.5); opacity: 1; }
            40% { bottom: 50%; transform: scale(1.2); }
            100% { bottom: 120vh; transform: scale(0.3); opacity: 0; }
        }
        .intro-text { color: #00d2ff; font-weight: bold; font-size: 14px; text-transform: uppercase; letter-spacing: 2px; opacity: 0; animation: fadeIn 2s forwards; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Ãœst Panel */
        .top-bar {
            display: flex; justify-content: space-between; align-items: center;
            padding: 15px; background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(15px);
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .user-box { display: flex; align-items: center; gap: 10px; }
        .user-box img { width: 38px; height: 38px; border-radius: 50%; border: 2px solid #00d2ff; }

        /* LeoBank KartÄ± */
        .leo-card {
            width: 290px; height: 170px;
            background: linear-gradient(135deg, #1a1a1a, #333);
            border-radius: 20px; padding: 20px; margin: 20px auto;
            position: relative; box-shadow: 0 0 30px rgba(0, 210, 255, 0.2);
            border: 1px solid rgba(255,255,255,0.1);
        }

        /* Kontent SahÉ™si */
        .content-area { padding: 20px; text-align: center; height: 65vh; overflow-y: auto; padding-bottom: 100px; }
        .hidden { display: none; }

        /* XidmÉ™t KartlarÄ± */
        .service-item {
            background: rgba(255,255,255,0.07); padding: 15px; border-radius: 15px; 
            margin-bottom: 12px; display: flex; justify-content: space-between; 
            align-items: center; border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(10px); text-align: left;
        }
        .btn-buy { background: #00d2ff; color: #000; border: none; padding: 8px 16px; border-radius: 8px; font-weight: bold; }

        /* Alt Naviqasiya */
        .glass-nav {
            position: fixed; bottom: 20px; left: 5%; width: 90%;
            background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(25px);
            border-radius: 25px; display: flex; justify-content: space-around; padding: 12px 0;
            border: 1px solid rgba(255,255,255,0.2); z-index: 100;
        }
        .nav-item { opacity: 0.5; font-size: 11px; text-align: center; cursor: pointer; transition: 0.3s; }
        .nav-item.active { opacity: 1; color: #00d2ff; transform: scale(1.1); }
    </style>
</head>
<body>

    <audio id="rocket-sound" src="https://assets.mixkit.co/active_storage/sfx/2004/2004-preview.mp3"></audio>
    
    <div id="intro-screen">
        <div id="rocket" class="rocket">ðŸš€</div>
        <div class="intro-text">SMM AZERBAIJAN PRO</div>
    </div>

    <div id="canvas-container"></div>

    <div class="top-bar">
        <div style="font-weight: bold; color: #00d2ff; letter-spacing: 1px;">SMM PANEL</div>
        <div class="user-box">
            <div style="text-align: right;">
                <div id="u_name" style="font-size: 12px; font-weight: 500;">YÃ¼klÉ™nir...</div>
                <div id="u_bal" style="color: #4ade80; font-weight: bold; font-size: 15px;">0.00 â‚¼</div>
            </div>
            <img id="u_pic" src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png">
        </div>
    </div>

    <div class="content-area">
        <div id="tab-xidmet">
            <h3 style="margin-bottom: 20px;">ðŸ“¦ XidmÉ™tlÉ™r</h3>
            <div id="services-list">
                <p style="opacity: 0.5;">XidmÉ™tlÉ™r bota baÄŸlanÄ±r...</p>
            </div>
        </div>

        <div id="tab-balans" class="hidden">
            <h3>ðŸ’³ Balans ArtÄ±r</h3>
            <div class="leo-card">
                <div style="text-align: left; font-size: 12px; color: #ffeb3b; font-weight: bold;">LEO BANK</div>
                <div style="margin-top: 35px; font-size: 19px; letter-spacing: 2px; font-family: monospace;">5411 2498 1332 8171</div>
                <div style="margin-top: 25px; display: flex; justify-content: space-between; font-size: 11px; opacity: 0.8;">
                    <span>Ã–mÉ™r</span>
                    <span>12/28</span>
                </div>
            </div>
            <p style="font-size: 13px; opacity: 0.7; padding: 10px;">Ã–dÉ™niÅŸdÉ™n sonra qÉ™bzi yÃ¼klÉ™yin:</p>
            <input type="file" id="file-in" class="hidden" accept="image/*" onchange="fileSent()">
            <button onclick="document.getElementById('file-in').click()" style="background: #00d2ff; color: black; border: none; padding: 15px 35px; border-radius: 12px; font-weight: bold; box-shadow: 0 5px 20px rgba(0,210,255,0.3);">ðŸ“¸ QÉ™bz YÃ¼klÉ™</button>
            <div id="status" style="margin-top: 15px; color: #4ade80;"></div>
        </div>
    </div>

    <div class="glass-nav">
        <div class="nav-item active" onclick="showTab('xidmet', this)">
            <div style="font-size: 22px;">ðŸ“¦</div>
            <div>Market</div>
        </div>
        <div class="nav-item" onclick="showTab('balans', this)">
            <div style="font-size: 22px;">ðŸ’³</div>
            <div>Balans</div>
        </div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        // --- 3D PLANET (Three.js) ---
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        const planet = new THREE.Mesh(
            new THREE.SphereGeometry(2, 32, 32),
            new THREE.MeshPhongMaterial({ color: 0x00d2ff, wireframe: true, transparent: true, opacity: 0.15 })
        );
        scene.add(planet);
        const light = new THREE.PointLight(0xffffff, 1, 100);
        light.position.set(5, 5, 5);
        scene.add(light);
        camera.position.z = 5;

        function animate() {
            requestAnimationFrame(animate);
            planet.rotation.y += 0.002;
            renderer.render(scene, camera);
        }
        animate();

        // --- LOGÄ°KA VÆ ANIMASÄ°YALAR ---
        window.onload = () => {
            const rock = document.getElementById('rocket');
            const snd = document.getElementById('rocket-sound');
            
            setTimeout(() => {
                rock.classList.add('fly-animation');
                snd.play().catch(() => {});
            }, 500);

            setTimeout(() => {
                document.getElementById('intro-screen').style.opacity = '0';
                setTimeout(() => document.getElementById('intro-screen').remove(), 1000);
            }, 3000);

            // Botdan gÉ™lÉ™n mÉ™lumatlarÄ± oxu
            const params = new URLSearchParams(window.location.search);
            const bal = params.get('balance');
            const servicesRaw = params.get('services');

            if(bal) document.getElementById('u_bal').innerText = bal + " â‚¼";

            if(servicesRaw) {
                try {
                    const services = JSON.parse(servicesRaw);
                    const list = document.getElementById('services-list');
                    list.innerHTML = "";
                    services.forEach(s => {
                        list.innerHTML += `
                            <div class="service-item">
                                <div>
                                    <div style="font-weight:bold; font-size:13px;">${s.name}</div>
                                    <div style="font-size:11px; color:#4ade80; margin-top:4px;">${s.rate} â‚¼ / 1000 É™dÉ™d</div>
                                </div>
                                <button class="btn-buy" onclick="order('${s.service}')">Al</button>
                            </div>`;
                    });
                } catch(e) { console.error("XidmÉ™t xÉ™tasÄ±:", e); }
            }

            if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
                document.getElementById('u_name').innerText = tg.initDataUnsafe.user.first_name;
                if(tg.initDataUnsafe.user.photo_url) document.getElementById('u_pic').src = tg.initDataUnsafe.user.photo_url;
            }
        };

        function showTab(t, el) {
            document.getElementById('tab-xidmet').classList.add('hidden');
            document.getElementById('tab-balans').classList.add('hidden');
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            document.getElementById('tab-' + t).classList.remove('hidden');
            el.classList.add('active');
        }

        function fileSent() {
            document.getElementById('status').innerText = "QÉ™bz gÃ¶ndÉ™rildi! Botu yoxlayÄ±n.";
            tg.sendData("qebz_atildi");
            setTimeout(() => tg.close(), 1200);
        }

        function order(id) {
            tg.sendData("order_" + id);
            tg.close();
        }
    </script>
</body>
</html>
